#!/usr/bin/env php
<?php

declare(strict_types=1);

use Chassis\Application;
use Chassis\Framework\Kernel;
use DaWaPack\Providers\InboundServiceProvider;
use DaWaPack\Providers\OutboundServiceProvider;

/*
|--------------------------------------------------------------------------
| Create The Application
|--------------------------------------------------------------------------
*/
/** @var Application $app */
$app = require __DIR__ . '/../bootstrap/app.php';

/*
|--------------------------------------------------------------------------
| Register multi-threading
|--------------------------------------------------------------------------
*/
$app->withThreads();

/*
|--------------------------------------------------------------------------
| Register broker
|--------------------------------------------------------------------------
*/
$app->withBroker();

/*
|--------------------------------------------------------------------------
| Add container aliases
|--------------------------------------------------------------------------
*/
$app->addServiceProvider(new InboundServiceProvider());
$app->addServiceProvider(new OutboundServiceProvider());

/*
|--------------------------------------------------------------------------
| Create the kernel instance in the runner context type
|--------------------------------------------------------------------------
*/
(new Kernel($app))->boot();
